<server>
  <include location="../fatTestPorts.xml" />

  <featureManager>
    <feature>bells-1.0</feature>
    <feature>componenttest-1.0</feature>
    <feature>ejbPersistentTimer-3.2</feature>
    <feature>jndi-1.0</feature>
    <feature>jpaContainer-2.1</feature>
    <feature>servlet-3.1</feature>
    <feature>jdbc-4.2</feature>
  </featureManager>

  <application location="jpaContainer.ear">
    <classloader commonLibraryRef="jdbclib,ecl"/>
  </application>
  
  <dataSource id="DefaultDataSource" jndiName="jdbc/ds">
    <jdbcDriver libraryRef="jdbclib"/>
   	<properties.derby.embedded databaseName="memory:ds" createDatabase="create"/>
  </dataSource>

  <bell libraryRef="ecl"/>
   
  <library id="jdbclib">
    <fileset dir="${shared.resource.dir}/derby" includes="*.jar"/>
  </library>
  
  <library id="ecl">
    <fileset dir="${shared.resource.dir}/ecl" includes="*.jar"/>
  </library>
  
  <jpa defaultPersistenceProvider="org.extension.jpa.ExtendedPersistenceProvider" defaultJtaDataSourceJndiName="jdbc/ds"/>
  
  <javaPermission className="java.lang.RuntimePermission" name="accessDeclaredMembers"/>
  <javaPermission className="java.lang.RuntimePermission" name="accessClassInPackage.com.ibm.oti.shared"/>
  <javaPermission className="java.util.PropertyPermission" name="*" actions="read"/>
  <javaPermission className="java.lang.reflect.ReflectPermission" name="suppressAccessChecks"/>
  <javaPermission className="javax.management.MBeanServerPermission" name="findMBeanServer"/>
  <javaPermission className="javax.management.MBeanPermission" name="*" actions="*"/>
  <javaPermission className="java.lang.RuntimePermission" name="getClassLoader"/>
  <javaPermission codebase="${shared.resource.dir}/ecl/org.eclipse.persistence.core_2.6.4.v20160829-44060b6.jar" className="java.security.AllPermission"/>
  <javaPermission codebase="${shared.resource.dir}/ecl/org.eclipse.persistence.dbws_2.6.4.v20160829-44060b6.jar" className="java.security.AllPermission"/>
  <javaPermission codebase="${shared.resource.dir}/ecl/org.eclipse.persistence.jpa_2.6.4.v20160829-44060b6.jar" className="java.security.AllPermission"/>
  <javaPermission codebase="${shared.resource.dir}/ecl/org.eclipse.persistence.jpa.jpql_2.6.4.v20160829-44060b6.jar" className="java.security.AllPermission"/>
  <javaPermission codebase="${shared.resource.dir}/ecl/org.eclipse.persistence.jpa.modelgen_2.6.4.v20160829-44060b6.jar" className="java.security.AllPermission"/>
  <javaPermission codebase="${shared.resource.dir}/ecl/org.eclipse.persistence.moxy_2.6.4.v20160829-44060b6.jar" className="java.security.AllPermission"/>
  <javaPermission codebase="${shared.resource.dir}/derby/derby.jar" className="java.security.AllPermission"/>
</server>
